<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù…ÙØ§Ø¹Ù„ Ø§Ù„Ù†ÙˆÙˆÙŠ Ù„Ù„Ø¹ÙŠØ¯ ğŸ‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            text-align: center;
            background-color: #2f1241;
            color: white;
            font-family: 'Amiri', serif;
        }

        button {
            background: gold;
            color: #2f1241;
            font-size: 20px;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background: orange;
        }

        #explosion {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: all 0.8s ease-out;
        }

        canvas {
            display: none;
            margin-top: 20px;
            max-width: 100%;
        }
    </style>
</head>
<body>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… -->
    <div id="page1">
        <h2>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ</h2>
        <input type="text" id="nameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
        <br><br>
        <button onclick="goToChargingPage()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø´Ø­Ù† Ø§Ù„Ù…ÙØ§Ø¹Ù„ -->
    <div id="page2" style="display: none;">
        <h2>Ø§Ø¶ØºØ· Ù„Ø´Ø­Ù† Ø§Ù„Ù…ÙØ§Ø¹Ù„ Ø§Ù„Ù†ÙˆÙˆÙŠ</h2>
        <button onclick="startCharging()">Ø§Ø¶ØºØ· Ù‡Ù†Ø§</button>

        <div id="energy-bar" style="width: 80%; height: 25px; background: gray; margin: 20px auto; border-radius: 10px; overflow: hidden;">
            <div id="energy-fill" style="height: 100%; width: 0%; background: linear-gradient(90deg, yellow, orange); transition: width 0.3s;"></div>
        </div>
    </div>

    <!-- Ø§Ù†ÙØ¬Ø§Ø± Ù†ÙˆÙˆÙŠ -->
    <div id="explosion"></div>

    <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠØ¯Ø© -->
    <canvas id="eidCanvas"></canvas>

    <!-- Ø²Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© -->
    <button id="downloadBtn" onclick="downloadImage()" style="display: none; margin-top: 20px; background: green; color: white; padding: 10px 15px; border: none; border-radius: 5px; font-size: 18px; cursor: pointer;">
        ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© ğŸ“¥
    </button>

    <script>
        let userName = "";

        function goToChargingPage() {
            userName = document.getElementById("nameInput").value.trim();
            if (userName === "") {
                alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
                return;
            }

            document.getElementById("page1").style.display = "none";
            document.getElementById("page2").style.display = "block";
        }

        function startCharging() {
            let energy = 0;
            let energyFill = document.getElementById("energy-fill");
            let button = document.querySelector("#page2 button");

            button.disabled = true;
            button.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø´Ø­Ù†... âš¡";

            let interval = setInterval(() => {
                energy += 10;
                energyFill.style.width = energy + "%";

                if (energy >= 100) {
                    clearInterval(interval);
                    triggerExplosion();
                }
            }, 300);
        }

        function triggerExplosion() {
            let explosion = document.getElementById("explosion");

            explosion.style.opacity = "1";
            explosion.style.width = "500vw";
            explosion.style.height = "500vh";

            document.body.style.transition = "transform 0.1s ease-in-out";
            document.body.style.transform = "translateX(10px)";

            setTimeout(() => {
                document.body.style.transform = "translateX(-10px)";
            }, 100);

            setTimeout(() => {
                document.body.style.transform = "translateX(0px)";
                explosion.style.opacity = "0";
                showEidCard();
            }, 800);
        }

        function showEidCard() {
            let canvas = document.getElementById("eidCanvas");
            let ctx = canvas.getContext("2d");

            let img = new Image();
            img.crossOrigin = "anonymous";
            img.src = "https://raw.githubusercontent.com/Raghad2gh/eid-card-image/main/5971916313444075084_120.jpg";

            img.onload = function () {
                let maxWidth = window.innerWidth * 0.9; // Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„
                let scaleFactor = maxWidth / img.width;

                canvas.width = maxWidth;
                canvas.height = img.height * scaleFactor;

                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                ctx.font = Math.floor(40 * scaleFactor) + "px 'Amiri', serif";
                ctx.fillStyle = "white";
                ctx.textAlign = "center";

                ctx.fillText(userName, canvas.width / 2, canvas.height - 50 * scaleFactor);

                document.getElementById("page2").style.display = "none";
                canvas.style.display = "block";

                // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                document.getElementById("downloadBtn").style.display = "block";
            };
        }

        function downloadImage() {
            let canvas = document.getElementById("eidCanvas");
            let link = document.createElement("a");
            link.download = "eid_card.png";
            link.href = canvas.toDataURL("image/png");
            link.click();
        }
    </script>

</body>
</html>
